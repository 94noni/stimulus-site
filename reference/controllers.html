<!doctype html>
<html lang="en">

  <head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>Stimulus Reference</title>
  <link rel="canonical" href="https://stimulus.hotwired.dev/reference/controllers">

  <link rel="alternate icon" type="image/png" sizes="32x32" href="/assets/favicon-32x32.png">
  <link rel="icon" type="image/svg+xml" href="/assets/favicon.svg">
  <link rel="mask-icon" href="/assets/favicon.svg" color="#000000">
  <link rel="apple-touch-icon" href="/assets/favicon-196x196.png">

  <link rel="preload" href="/assets/fonts/Bitter-Roman.woff2" as="font" type="font/woff2" crossorigin>
  <link rel="preload" href="/assets/fonts/Bitter-Italic.woff2" as="font" type="font/woff2" crossorigin>
  <link rel="preload" href="/assets/fonts/Jost-Roman.woff2" as="font" type="font/woff2" crossorigin>
  <link rel="preload" href="/assets/fonts/Jost-Italic.woff2" as="font" type="font/woff2" crossorigin>
  <link rel="preload" href="/assets/fonts/RobotoMono-Roman.woff2" as="font" type="font/woff2" crossorigin>
  <link rel="preload" href="/assets/fonts/RobotoMono-Italic.woff2" as="font" type="font/woff2" crossorigin>

  <link rel="stylesheet" href="/assets/main.css">
  <script src="/assets/main.js" type="module"></script>
  <script async defer data-domain="stimulus.hotwired.dev" src="https://plausible.io/js/plausible.js"></script>
</head>


  <body>

    <a class="nav-skip" href="#content">Skip to content</a>

<nav class="jump">
  <ul class="jump__list">
    <li><a class="jump__list-link jump__list-link--hotwire" href="https://hotwired.dev">Hotwire:</a></li>
    <li><a class="jump__list-link" href="https://turbo.hotwired.dev">Turbo</a></li>
    <li><a class="jump__list-link jump__list-link--active" href="https://stimulus.hotwired.dev">Stimulus</a></li>
    <li><span class="jump__list-link jump__list-link--disabled">Strada <span class="jump__list-info">(Coming Soon!)</span></span></li>
  </ul>
</nav>


    <div class="nav__github-corner">
  <svg width="60" height="60" viewBox="0 0 250 250" version="1.1" xmlns="github-corner"
	style="fill:#000000; color:#FFFFFF;"
	aria-hidden="true">
	<a href="https://github.com/hotwired/stimulus/tree/main/docs/./reference/controllers.md" target="_blank" class="github-corner">
	<path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
	<path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2"
		fill="#FFFFFF" style="transform-origin: 130px 106px;" class="octo-arm">
	</path>
	<path
		d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="#FFFFFF" class="octo-body">
	</path>
</a>
</svg>
</div>

<main class="grid docs">

  <header class="docs__index grid__custom-item">
    <a class="nav-logo" href="/" aria-label="Stimulus">
  <svg class="logo" width="374" height="60" viewBox="0 0 374 60" xmlns="http://www.w3.org/2000/svg">
  <g class="logo__icon" fill="#d9c6a4">
    <path fill-rule="evenodd" clip-rule="evenodd" d="M1.76 1.54053e-08H58.24C58.7016 -6.10197e-05 59.1448 0.181244 59.474 0.504837C59.8032 0.828445 59.9921 1.26843 60 1.73V8.78999H45.92C44.7723 8.83557 43.6503 9.14343 42.64 9.69L15.64 25.55C14.6261 26.0964 13.5009 26.4042 12.35 26.45H0V15.86H12.35C13.5001 15.9106 14.6243 16.2181 15.64 16.76L18.64 18.51C19.1038 18.7494 19.6181 18.8743 20.14 18.8743C20.6619 18.8743 21.1762 18.7494 21.64 18.51L25.48 16.25C25.6438 16.1661 25.7813 16.0386 25.8773 15.8816C25.9732 15.7245 26.024 15.5441 26.024 15.36C26.024 15.1759 25.9732 14.9955 25.8773 14.8384C25.7813 14.6814 25.6438 14.5539 25.48 14.47L17.4 9.72C16.3879 9.17799 15.267 8.87041 14.12 8.82001H0V1.75999C0 1.29321 0.185425 0.845551 0.515495 0.515488C0.845558 0.185425 1.29322 1.54053e-08 1.76 1.54053e-08ZM51.56 15.88H47.65C46.4999 15.9306 45.3757 16.2381 44.36 16.78L17.36 32.65C16.3479 33.192 15.227 33.4996 14.08 33.55H0V44.14H12.35C13.5001 44.0894 14.6243 43.7819 15.64 43.24L42.64 27.37C43.6521 26.828 44.773 26.5204 45.92 26.47H60V15.88H51.56ZM51.56 33.56H47.65C46.4999 33.6106 45.3757 33.9181 44.36 34.46L17.36 50.32C16.3497 50.8666 15.2277 51.1744 14.08 51.22H0V58.28C0.0129623 58.739 0.203789 59.175 0.532181 59.4959C0.860573 59.8168 1.30083 59.9976 1.76 60H58.24C58.7043 59.9974 59.1489 59.8125 59.4781 59.4852C59.8073 59.1578 59.9948 58.7142 60 58.25V51.19H45.88C44.7323 51.1444 43.6103 50.8366 42.6 50.29L34.52 45.55C34.3536 45.4671 34.2136 45.3394 34.1158 45.1813C34.0179 45.0232 33.9661 44.8409 33.9661 44.655C33.9661 44.4691 34.0179 44.2868 34.1158 44.1287C34.2136 43.9706 34.3536 43.8429 34.52 43.76L38.36 41.51C38.8238 41.2706 39.3381 41.1457 39.86 41.1457C40.3819 41.1457 40.8962 41.2706 41.36 41.51L44.36 43.25C45.3739 43.7964 46.4991 44.1042 47.65 44.15H60V33.56H51.56Z"/>
  </g>
  <g class="logo__wordmark" fill="#000">
    <path fill-rule="evenodd" clip-rule="evenodd" d="M370.755 7.89102C371.743 8.67355 372.446 9.7594 372.755 10.981C373.143 12.6926 373.143 14.4694 372.755 16.181L372.205 19.331L358.965 21.001L359.715 16.551H351.935L350.505 24.831H358.995C360.723 24.8173 362.449 24.9477 364.155 25.221C365.529 25.4133 366.838 25.9273 367.975 26.721C369.022 27.4748 369.783 28.5602 370.135 29.801C370.524 31.5125 370.524 33.2895 370.135 35.001L368.575 44.001C368.288 45.8759 367.669 47.6844 366.745 49.341C365.984 50.6545 364.926 51.7711 363.655 52.601C362.373 53.4042 360.946 53.9478 359.455 54.201C357.724 54.4941 355.971 54.6346 354.215 54.621H343.995C342.266 54.6396 340.539 54.4991 338.835 54.201C337.509 53.9945 336.26 53.4427 335.215 52.601C334.258 51.7576 333.613 50.6161 333.385 49.361C333.079 47.5934 333.12 45.7831 333.505 44.031L334.045 40.811L347.525 39.041L346.635 44.101H355.335L356.855 35.301H348.375C346.625 35.3217 344.877 35.1744 343.155 34.861C341.805 34.6463 340.532 34.0923 339.455 33.251C338.478 32.4098 337.804 31.2718 337.535 30.011C337.205 28.2323 337.242 26.4048 337.645 24.641L339.105 16.221C339.353 14.3898 339.962 12.6259 340.895 11.031C341.679 9.75696 342.751 8.68481 344.025 7.90101C345.307 7.13865 346.722 6.62626 348.195 6.39102C349.848 6.12225 351.52 5.99179 353.195 6.00102H362.195C363.84 5.987 365.483 6.11751 367.105 6.39102C368.426 6.58644 369.679 7.10135 370.755 7.89102ZM104.915 6.39102C106.229 6.58957 107.474 7.10434 108.545 7.89102C109.545 8.67512 110.255 9.7691 110.565 11.001C110.96 12.7051 110.96 14.477 110.565 16.181L110.025 19.331L96.7851 21.001L97.5251 16.551H89.7551L88.3251 24.831H96.8151C98.5429 24.8177 100.269 24.9481 101.975 25.221C103.348 25.4152 104.657 25.929 105.795 26.721C106.842 27.4748 107.603 28.5602 107.955 29.801C108.339 31.513 108.339 33.289 107.955 35.001L106.395 44.001C106.11 45.8777 105.487 47.6871 104.555 49.341C103.794 50.6545 102.736 51.7711 101.465 52.601C100.188 53.4058 98.7637 53.9496 97.2751 54.201C95.5408 54.4947 93.784 54.6352 92.0251 54.621H81.8051C80.0759 54.6387 78.3487 54.4982 76.6451 54.201C75.3219 53.9946 74.0767 53.4427 73.0351 52.601C72.0785 51.7557 71.4311 50.6156 71.1951 49.361C70.8994 47.5926 70.9401 45.7843 71.3151 44.031L71.8551 40.811L85.3351 39.041L84.4551 44.101H93.1051L94.6451 35.301H86.1551C84.4084 35.3213 82.6637 35.174 80.9451 34.861C79.5945 34.6493 78.3206 34.095 77.2451 33.251C76.2683 32.4098 75.594 31.2718 75.3251 30.011C74.9909 28.233 75.025 26.4054 75.4251 24.641L76.8851 16.221C77.1467 14.3887 77.7651 12.6254 78.7051 11.031C79.4881 9.7597 80.5563 8.68809 81.8251 7.90103C83.1114 7.14009 84.5294 6.62785 86.0051 6.39102C87.658 6.12207 89.3305 5.99162 91.0051 6.00102H100.005C101.65 5.98741 103.293 6.11792 104.915 6.39102ZM115.315 6.55102H150.565L148.455 18.601H137.725L131.545 54.081H117.765L123.945 18.601H113.215L115.315 6.55102ZM154.505 6.55102L146.215 54.081H160.005L168.285 6.55102H154.505ZM192.665 25.391L206.045 6.55102H218.635L210.355 54.081H196.535L200.885 29.231L189.135 46.141L182.915 29.571L178.645 54.081H166.725L175.005 6.55102H185.295L192.665 25.391ZM246.985 6.55102L240.745 42.441H232.625L238.875 6.55102H225.105L218.585 44.061C218.205 45.8182 218.178 47.6333 218.505 49.401C218.765 50.6676 219.445 51.8092 220.435 52.641C221.529 53.4764 222.815 54.0232 224.175 54.231C225.895 54.5358 227.639 54.6798 229.385 54.661H239.675C241.494 54.6766 243.311 54.5327 245.105 54.231C246.629 53.9898 248.091 53.4494 249.405 52.641C250.676 51.8191 251.734 50.709 252.495 49.401C253.413 47.7437 254.026 45.935 254.305 44.061L260.805 6.55102H246.985ZM267.255 6.55102H281.045L274.865 42.031H289.665L287.565 54.081H258.975L267.255 6.55102ZM321.515 6.55102L315.265 42.441H307.155L313.405 6.55102H299.615L293.105 44.061C292.725 45.8182 292.698 47.6333 293.025 49.401C293.281 50.669 293.962 51.8118 294.955 52.641C296.048 53.478 297.334 54.0249 298.695 54.231C300.415 54.5365 302.159 54.6805 303.905 54.661H314.185C316.008 54.677 317.828 54.5331 319.625 54.231C321.147 53.9916 322.605 53.451 323.915 52.641C325.19 51.8244 326.25 50.7132 327.005 49.401C327.927 47.7444 328.543 45.9356 328.825 44.061L335.345 6.55102H321.515Z"/>
  </g>
</svg>

</a>

<input type="checkbox" id="hamburger" class="nav-checkbox"/>
<label class="nav-mobile-button" for="hamburger"><span></span> Menu</label>

<nav class="nav">

  <label class="nav-mobile-button nav-mobile-button--close" for="hamburger"><span></span> close</label>

  <ul class="nav__list ">
    <li>
      <a class="nav__list-link" href="/handbook/introduction">Handbook</a>

      <ul class="nav__sublist "><li>
      <a class="nav__sublist-link" href="/handbook/origin">Preface: The Origin of Stimulus
      </a>
    </li><li>
      <a class="nav__sublist-link" href="/handbook/introduction">1: Introduction
      </a>
    </li><li>
      <a class="nav__sublist-link" href="/handbook/hello-stimulus">2: Hello, Stimulus
      </a>
    </li><li>
      <a class="nav__sublist-link" href="/handbook/building-something-real">3: Building Something Real
      </a>
    </li><li>
      <a class="nav__sublist-link" href="/handbook/designing-for-resilience">4: Designing For Resilience
      </a>
    </li><li>
      <a class="nav__sublist-link" href="/handbook/managing-state">5: Managing State
      </a>
    </li><li>
      <a class="nav__sublist-link" href="/handbook/working-with-external-resources">6: Working With External Resources
      </a>
    </li><li>
      <a class="nav__sublist-link" href="/handbook/installing">7: Installing Stimulus in Your Application
      </a>
    </li></ul>

    </li>
    <li>
      <a class="nav__list-link active" href="/reference/controllers">Reference</a>

      <ul class="nav__sublist  active"><li>
      <a class="nav__sublist-link active" href="/reference/controllers">Controllers
      </a>
    </li><li>
      <a class="nav__sublist-link" href="/reference/lifecycle-callbacks">Lifecycle Callbacks
      </a>
    </li><li>
      <a class="nav__sublist-link" href="/reference/actions">Actions
      </a>
    </li><li>
      <a class="nav__sublist-link" href="/reference/targets">Targets
      </a>
    </li><li>
      <a class="nav__sublist-link" href="/reference/outlets">Outlets
      </a>
    </li><li>
      <a class="nav__sublist-link" href="/reference/values">Values
      </a>
    </li><li>
      <a class="nav__sublist-link" href="/reference/css-classes">CSS Classes
      </a>
    </li><li>
      <a class="nav__sublist-link" href="/reference/using-typescript">Using Typescript
      </a>
    </li></ul>

    </li>
    <li>
      <a class="nav__list-link" href="https://discuss.hotwired.dev" title="Have a question? Connect with other developers on the Stimulus Discourse community forum.">Community</a>
    </li>
    <li>
      <a class="nav__list-link" href="https://github.com/hotwired/stimulus" title="Head over to GitHub for code, bug reports, and pull requests.">Source Code</a>
    </li>
  </ul>

</nav>

  </header>

  <section id="content" class="docs__content grid__custom-item">

    <h1>Controllers</h1>
<p>A <em>controller</em> is the basic organizational unit of a Stimulus application.</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">{</span> Controller <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"@hotwired/stimulus"</span><br><br><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">extends</span> Controller <span class="token punctuation">{</span><br>  <span class="token comment">// …</span><br><span class="token punctuation">}</span></code></pre>
<p>Controllers are instances of JavaScript classes that you define in your application. Each controller class inherits from the <code>Controller</code> base class exported by the <code>@hotwired/stimulus</code> module.</p>
<h2 id="properties"><a class="anchor" href="#properties">﹟</a> Properties</h2>
<p>Every controller belongs to a Stimulus <code>Application</code> instance and is associated with an HTML element. Within a controller class, you can access the controller’s:</p>
<ul>
<li>application, via the <code>this.application</code> property</li>
<li>HTML element, via the <code>this.element</code> property</li>
<li>identifier, via the <code>this.identifier</code> property</li>
</ul>
<h2 id="modules"><a class="anchor" href="#modules">﹟</a> Modules</h2>
<p>Define your controller classes in JavaScript modules, one per file. Export each controller class as the module’s default object, as in the example above.</p>
<p>Place these modules in the <code>controllers/</code> directory. Name the files <code>[identifier]_controller.js</code>, where <code>[identifier]</code> corresponds to each controller’s identifier.</p>
<h2 id="identifiers"><a class="anchor" href="#identifiers">﹟</a> Identifiers</h2>
<p>An <em>identifier</em> is the name you use to reference a controller class in HTML.</p>
<p>When you add a <code>data-controller</code> attribute to an element, Stimulus reads the identifier from the attribute’s value and creates a new instance of the corresponding controller class.</p>
<p>For example, this element has a controller which is an instance of the class defined in <code>controllers/reference_controller.js</code>:</p>
<meta data-controller="callout" data-callout-text-value="reference">
<pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">data-controller</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>reference<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></code></pre>
<p>The following is an example of how Stimulus will generate identifiers for controllers in its require context:</p>
<table>
<thead>
<tr>
<th>If your controller file is named…</th>
<th>its identifier will be…</th>
</tr>
</thead>
<tbody>
<tr>
<td>clipboard_controller.js</td>
<td>clipboard</td>
</tr>
<tr>
<td>date_picker_controller.js</td>
<td>date-picker</td>
</tr>
<tr>
<td>users/list_item_controller.js</td>
<td>users--list-item</td>
</tr>
<tr>
<td>local-time-controller.js</td>
<td>local-time</td>
</tr>
</tbody>
</table>
<h2 id="scopes"><a class="anchor" href="#scopes">﹟</a> Scopes</h2>
<p>When Stimulus connects a controller to an element, that element and all of its children make up the controller’s <em>scope</em>.</p>
<p>For example, the <code>&lt;div&gt;</code> and <code>&lt;h1&gt;</code> below are part of the controller’s scope, but the surrounding <code>&lt;main&gt;</code> element is not.</p>
<pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>main</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">data-controller</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>reference<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">></span></span>Reference<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>main</span><span class="token punctuation">></span></span></code></pre>
<h2 id="nested-scopes"><a class="anchor" href="#nested-scopes">﹟</a> Nested Scopes</h2>
<p>When nested, each controller is only aware of its own scope excluding the scope of any controllers nested within.</p>
<p>For example, the <code>#parent</code> controller below is only aware of the <code>item</code> targets directly within its scope, but not any targets of the <code>#child</code> controller.</p>
<pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>parent<span class="token punctuation">"</span></span> <span class="token attr-name">data-controller</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>list<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">data-list-target</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>item<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>One<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">data-list-target</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>item<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Two<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>child<span class="token punctuation">"</span></span> <span class="token attr-name">data-controller</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>list<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">data-list-target</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>item<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>I am<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span><br>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">data-list-target</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>item<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>a nested list<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">></span></span></code></pre>
<h2 id="multiple-controllers"><a class="anchor" href="#multiple-controllers">﹟</a> Multiple Controllers</h2>
<p>The <code>data-controller</code> attribute’s value is a space-separated list of identifiers:</p>
<meta data-controller="callout" data-callout-text-value="clipboard">
<meta data-controller="callout" data-callout-text-value="list-item">
<pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">data-controller</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>clipboard list-item<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></code></pre>
<p>It’s common for any given element on the page to have many controllers. In the example above, the <code>&lt;div&gt;</code> has two connected controllers, <code>clipboard</code> and <code>list-item</code>.</p>
<p>Similarly, it’s common for multiple elements on the page to reference the same controller class:</p>
<meta data-controller="callout" data-callout-text-value="list-item">
<pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">data-controller</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>list-item<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>One<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">data-controller</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>list-item<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Two<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">data-controller</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>list-item<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Three<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">></span></span></code></pre>
<p>Here, each <code>&lt;li&gt;</code> has its own instance of the <code>list-item</code> controller.</p>
<h2 id="naming-conventions"><a class="anchor" href="#naming-conventions">﹟</a> Naming Conventions</h2>
<p>Always use camelCase for method and property names in a controller class.</p>
<p>When an identifier is composed of more than one word, write the words in kebab-case (i.e., by using dashes: <code>date-picker</code>, <code>list-item</code>).</p>
<p>In filenames, separate multiple words using either underscores or dashes (snake_case or kebab-case: <code>controllers/date_picker_controller.js</code>, <code>controllers/list-item-controller.js</code>).</p>
<h2 id="registration"><a class="anchor" href="#registration">﹟</a> Registration</h2>
<p>If you use Stimulus for Rails with an import map or Webpack together with the <code>@hotwired/stimulus-webpack-helpers</code> package, your application will automatically load and register controller classes following the conventions above.</p>
<p>If not, your application must manually load and register each controller class.</p>
<h3 id="registering-controllers-manually"><a class="anchor" href="#registering-controllers-manually">﹟</a> Registering Controllers Manually</h3>
<p>To manually register a controller class with an identifier, first import the class, then call the <code>Application#register</code> method on your application object:</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">import</span> ReferenceController <span class="token keyword">from</span> <span class="token string">"./controllers/reference_controller"</span><br><br>application<span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token string">"reference"</span><span class="token punctuation">,</span> ReferenceController<span class="token punctuation">)</span></code></pre>
<p>You can also register a controller class inline instead of importing it from a module:</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">{</span> Controller <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"@hotwired/stimulus"</span><br><br>application<span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token string">"reference"</span><span class="token punctuation">,</span> <span class="token keyword">class</span> <span class="token class-name">extends</span> Controller <span class="token punctuation">{</span><br>  <span class="token comment">// …</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre>
<h3 id="preventing-registration-based-on-environmental-factors"><a class="anchor" href="#preventing-registration-based-on-environmental-factors">﹟</a> Preventing Registration Based On Environmental Factors</h3>
<p>If you only want a controller registered and loaded if certain environmental factors are met – such a given user agent – you can overwrite the static <code>shouldLoad</code> method:</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">class</span> <span class="token class-name">UnloadableController</span> <span class="token keyword">extends</span> <span class="token class-name">ApplicationController</span> <span class="token punctuation">{</span><br>  <span class="token keyword">static</span> <span class="token keyword">get</span> <span class="token function">shouldLoad</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">return</span> <span class="token boolean">false</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span><br><br><span class="token comment">// This controller will not be loaded</span><br>application<span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token string">"unloadable"</span><span class="token punctuation">,</span> UnloadableController<span class="token punctuation">)</span></code></pre>
<h3 id="trigger-behaviour-when-a-controller-is-registered"><a class="anchor" href="#trigger-behaviour-when-a-controller-is-registered">﹟</a> Trigger Behaviour When A Controller Is Registered</h3>
<p>If you want to trigger some behaviour once a controller has been registered you can add a static <code>afterLoad</code> method:</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">class</span> <span class="token class-name">SpinnerButton</span> <span class="token keyword">extends</span> <span class="token class-name">Controller</span> <span class="token punctuation">{</span><br>  <span class="token keyword">static</span> legacySelector <span class="token operator">=</span> <span class="token string">".legacy-spinner-button"</span><br><br>  <span class="token keyword">static</span> <span class="token function">afterLoad</span><span class="token punctuation">(</span><span class="token parameter">identifier<span class="token punctuation">,</span> application</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token comment">// use the application instance to read the configured 'data-controller' attribute</span><br>    <span class="token keyword">const</span> <span class="token punctuation">{</span> controllerAttribute <span class="token punctuation">}</span> <span class="token operator">=</span> application<span class="token punctuation">.</span>schema<br><br>    <span class="token comment">// update any legacy buttons with the controller's registered identifier</span><br>    <span class="token keyword">const</span> <span class="token function-variable function">updateLegacySpinners</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>      document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>legacySelector<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">element</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>        element<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span>controllerAttribute<span class="token punctuation">,</span> identifier<span class="token punctuation">)</span><br>      <span class="token punctuation">}</span><span class="token punctuation">)</span><br>    <span class="token punctuation">}</span><br><br>    <span class="token comment">// called as soon as registered so DOM may not have loaded yet</span><br>    <span class="token keyword">if</span> <span class="token punctuation">(</span>document<span class="token punctuation">.</span>readyState <span class="token operator">==</span> <span class="token string">"loading"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>      document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"DOMContentLoaded"</span><span class="token punctuation">,</span> updateLegacySpinners<span class="token punctuation">)</span><br>    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span><br>      <span class="token function">updateLegacySpinners</span><span class="token punctuation">(</span><span class="token punctuation">)</span><br>    <span class="token punctuation">}</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span><br><br><span class="token comment">// This controller will update any legacy spinner buttons to use the controller</span><br>application<span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token string">"spinner-button"</span><span class="token punctuation">,</span> SpinnerButton<span class="token punctuation">)</span></code></pre>
<p>The <code>afterLoad</code> method will get called as soon as the controller has been registered, even if no controlled elements exist in the DOM. The function will be called bound to the original controller constructor along with two arguments; the <code>identifier</code> that was used when registering the controller and the Stimulus application instance.</p>
<h2 id="cross-controller-coordination-with-events"><a class="anchor" href="#cross-controller-coordination-with-events">﹟</a> Cross-Controller Coordination With Events</h2>
<p>If you need controllers to communicate with each other, you should use events. The <code>Controller</code> class has a convenience method called <code>dispatch</code> that makes this easier. It takes an <code>eventName</code> as the first argument, which is then automatically prefixed with the name of the controller separated by a colon. The payload is held in <code>detail</code>. It works like this:</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">class</span> <span class="token class-name">ClipboardController</span> <span class="token keyword">extends</span> <span class="token class-name">Controller</span> <span class="token punctuation">{</span><br>  <span class="token keyword">static</span> targets <span class="token operator">=</span> <span class="token punctuation">[</span> <span class="token string">"source"</span> <span class="token punctuation">]</span><br><br>  <span class="token function">copy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token string">"copy"</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> detail<span class="token operator">:</span> <span class="token punctuation">{</span> content<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>sourceTarget<span class="token punctuation">.</span>value <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><br>    navigator<span class="token punctuation">.</span>clipboard<span class="token punctuation">.</span><span class="token function">writeText</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>sourceTarget<span class="token punctuation">.</span>value<span class="token punctuation">)</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre>
<p>And this event can then be routed to an action on another controller:</p>
<pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">data-controller</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>clipboard effects<span class="token punctuation">"</span></span> <span class="token attr-name">data-action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>clipboard:copy->effects#flash<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>  PIN: <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">data-clipboard-target</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>source<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1234<span class="token punctuation">"</span></span> <span class="token attr-name">readonly</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">data-action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>clipboard#copy<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Copy to Clipboard<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></code></pre>
<p>So when the <code>Clipboard#copy</code> action is invoked, the <code>Effects#flash</code> action will be too:</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">class</span> <span class="token class-name">EffectsController</span> <span class="token keyword">extends</span> <span class="token class-name">Controller</span> <span class="token punctuation">{</span><br>  <span class="token function">flash</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> detail<span class="token operator">:</span> <span class="token punctuation">{</span> content <span class="token punctuation">}</span> <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span> <span class="token comment">// 1234</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre>
<p>If the two controllers don’t belong to the same HTML element, the <code>data-action</code> attribute
needs to be added to the <em>receiving</em> controller’s element. And if the receiving controller’s
element is not a parent (or same) of the emitting controller’s element, you need to add
<code>@window</code> to the event:</p>
<pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">data-action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>clipboard:copy@window->effects#flash<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></code></pre>
<p><code>dispatch</code> accepts additional options as the second parameter as follows:</p>
<table>
<thead>
<tr>
<th>option</th>
<th>default</th>
<th>notes</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>detail</code></td>
<td><code>{}</code> empty object</td>
<td>See <a href="https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent/detail">CustomEvent.detail</a></td>
</tr>
<tr>
<td><code>target</code></td>
<td><code>this.element</code></td>
<td>See <a href="https://developer.mozilla.org/en-US/docs/Web/API/Event/target">Event.target</a></td>
</tr>
<tr>
<td><code>prefix</code></td>
<td><code>this.identifier</code></td>
<td>If the prefix is falsey (e.g. <code>null</code> or <code>false</code>), only the <code>eventName</code> will be used. If you provide a string value the <code>eventName</code> will be prepended with the provided string and a colon.</td>
</tr>
<tr>
<td><code>bubbles</code></td>
<td><code>true</code></td>
<td>See <a href="https://developer.mozilla.org/en-US/docs/Web/API/Event/bubbles">Event.bubbles</a></td>
</tr>
<tr>
<td><code>cancelable</code></td>
<td><code>true</code></td>
<td>See <a href="https://developer.mozilla.org/en-US/docs/Web/API/Event/cancelable">Event.cancelable</a></td>
</tr>
</tbody>
</table>
<p><code>dispatch</code> will return the generated <a href="https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent"><code>CustomEvent</code></a>, you can use this to provide a way for the event to be cancelled by any other listeners as follows:</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">class</span> <span class="token class-name">ClipboardController</span> <span class="token keyword">extends</span> <span class="token class-name">Controller</span> <span class="token punctuation">{</span><br>  <span class="token keyword">static</span> targets <span class="token operator">=</span> <span class="token punctuation">[</span> <span class="token string">"source"</span> <span class="token punctuation">]</span><br><br>  <span class="token function">copy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">const</span> event <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token string">"copy"</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> cancelable<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><br>    <span class="token keyword">if</span> <span class="token punctuation">(</span>event<span class="token punctuation">.</span>defaultPrevented<span class="token punctuation">)</span> <span class="token keyword">return</span><br>    navigator<span class="token punctuation">.</span>clipboard<span class="token punctuation">.</span><span class="token function">writeText</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>sourceTarget<span class="token punctuation">.</span>value<span class="token punctuation">)</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre>
<pre class="language-js"><code class="language-js"><span class="token keyword">class</span> <span class="token class-name">EffectsController</span> <span class="token keyword">extends</span> <span class="token class-name">Controller</span> <span class="token punctuation">{</span><br>  <span class="token function">flash</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token comment">// this will prevent the default behaviour as determined by the dispatched event</span><br>    event<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre>
<h2 id="directly-invoking-other-controllers"><a class="anchor" href="#directly-invoking-other-controllers">﹟</a> Directly Invoking Other Controllers</h2>
<p>If for some reason it is not possible to use events to communicate between controllers, you can reach a controller instance via the <code>getControllerForElementAndIdentifier</code> method from the application. This should only be used if you have a unique problem that cannot be solved through the more general way of using events, but if you must, this is how:</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">class</span> <span class="token class-name">MyController</span> <span class="token keyword">extends</span> <span class="token class-name">Controller</span> <span class="token punctuation">{</span><br>  <span class="token keyword">static</span> targets <span class="token operator">=</span> <span class="token punctuation">[</span> <span class="token string">"other"</span> <span class="token punctuation">]</span><br><br>  <span class="token function">copy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">const</span> otherController <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>application<span class="token punctuation">.</span><span class="token function">getControllerForElementAndIdentifier</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>otherTarget<span class="token punctuation">,</span> <span class="token string">'other'</span><span class="token punctuation">)</span><br>    otherController<span class="token punctuation">.</span><span class="token function">otherMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre>
<p><a class="button" href="/reference/lifecycle-callbacks">Next: Lifecycle Callbacks</a></p></section>

  <footer class="docs__footer grid__item grid__item--start-4 grid__item--span-8">

    <footer class="footer">
  <p class="footer__headline">Brought to you by the makers of:</p>
  <ul class="footer__links">
    <li><a href="https://basecamp.com" target="_blank" rel="noopener"><img width="253" height="56" src="/assets/logo-basecamp.svg" alt="Basecamp"></a></li>
    <li><span>and</span></li>
    <li><a href="https://hey.com" target="_blank" rel="noopener"><img width="122" height="56" src="/assets/logo-hey.svg" alt="HEY"></a></li>
  </ul>
  <p class="footer__copyright">&copy; 2023 <a href="https://37signals.com" target="_blank" rel="noopener">37signals</a></p>
</footer>


  </footer>

</main>


  </body>

</html>
